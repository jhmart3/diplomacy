<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diplomacy Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        .nation {
            margin-bottom: 20px;
        }
        .orders {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Diplomacy Game</h1>
        <button id="get-game-state">Get Game State</button>
        <div id="game-state"></div>

        <div class="nation">
            <h2>Issue Orders</h2>
            <label for="nation">Select Nation:</label>
            <select id="nation">
                <option value="Austria">Austria</option>
                <option value="England">England</option>
                <option value="France">France</option>
                <option value="Germany">Germany</option>
                <option value="Italy">Italy</option>
                <option value="Russia">Russia</option>
                <option value="Turkey">Turkey</option>
            </select>
            <button id="get-orders">Get Potential Orders</button>
            <div class="orders" id="orders"></div>
        </div>

        <div class="submit-orders">
            <h2>Submit Final Orders</h2>
            <textarea id="final-orders" rows="5" cols="50" placeholder="Enter final orders JSON here..."></textarea><br>
            <button id="submit-orders">Submit Orders</button>
            <div id="submission-result"></div>
        </div>
    </div>

    <script>
        const API_URL = "http://localhost:5000";

        document.getElementById("get-game-state").addEventListener("click", async () => {
            const response = await fetch(`${API_URL}/game_state`);
            const data = await response.json();
            document.getElementById("game-state").textContent = JSON.stringify(data, null, 2);
        });

        document.getElementById("get-orders").addEventListener("click", async () => {
            const nation = document.getElementById("nation").value;
            const response = await fetch(`${API_URL}/potential_orders`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ nation }),
            });
            const data = await response.json();
            document.getElementById("orders").textContent = JSON.stringify(data, null, 2);
        });

        document.getElementById("submit-orders").addEventListener("click", async () => {
            const orders = document.getElementById("final-orders").value;
            try {
                const response = await fetch(`${API_URL}/final_orders`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: orders,
                });
                const data = await response.json();
                document.getElementById("submission-result").textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById("submission-result").textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
